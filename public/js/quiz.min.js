const startButton=document.getElementById("start-button"),nextButton=document.getElementById("next-button"),questionContainerElement=document.getElementById("questionsContainer"),questionElement=document.getElementById("question"),answerButtonsElement=document.getElementById("answer-buttons"),explanationDiv=document.getElementById("explanationDiv"),scoreBox=document.getElementById("scoreBox");let userScore=0,savedScore=0,shuffledQuestions,currentQuestionIndex;async function getData(){const response=await fetch("/api/questions/v1"),data=await response.json();console.log(data);const questions=data.questions.map(question=>({question:question.question,explanation:question.explanation,answers:[{text:question.answers[0].text,correct:question.answers[0].correct},{text:question.answers[1].text,correct:question.answers[1].correct},{text:question.answers[2].text,correct:question.answers[2].correct},{text:question.answers[3].text,correct:question.answers[3].correct}]}));function startGame(){startButton.classList.add("hide"),shuffledQuestions=questions.sort(()=>Math.random()-.5),currentQuestionIndex=0,questionContainerElement.classList.remove("hide"),setNextQuestion()}function setNextQuestion(){resetState(),showQuestion(shuffledQuestions[currentQuestionIndex])}function showQuestion(question){questionElement.innerText=question.question,question.answers.forEach(answer=>{const button=document.createElement("button");button.innerText=answer.text,button.classList.add("btnq"),answer.correct&&(button.dataset.correct=answer.correct),button.addEventListener("click",selectAnswer),answerButtonsElement.appendChild(button)}),explanationDiv.innerText=question.explanation}function resetState(){for(answerButtonsElement.classList.remove("disable-click"),nextButton.classList.add("hide"),explanationDiv.classList.add("hide");answerButtonsElement.firstChild;)answerButtonsElement.removeChild(answerButtonsElement.firstChild)}function selectAnswer(e){const selectedButton=e.target,correct=selectedButton.dataset.correct;selectedButton.dataset.correct?(userScore++,savedScore++,console.log(userScore),console.log(`Score to be save ${savedScore}`),scoreBox.innerText=userScore,answerButtonsElement.classList.add("disable-click")):(console.log("Wrong!"),answerButtonsElement.classList.add("disable-click")),setStatusClass(document.body,correct),Array.from(answerButtonsElement.children).forEach(button=>{setStatusClass(button,button.dataset.correct),showExplanation()}),shuffledQuestions.length>currentQuestionIndex+1?nextButton.classList.remove("hide"):(startButton.innerText="Restart",startButton.classList.remove("hide"))}function showExplanation(){explanationDiv.classList.remove("hide")}function setStatusClass(element,correct){clearStatusClass(element),correct?element.classList.add("correct"):element.classList.add("wrong")}function clearStatusClass(element){element.classList.remove("correct"),element.classList.remove("wrong")}console.log(questions),startButton.addEventListener("click",startGame),nextButton.addEventListener("click",()=>{currentQuestionIndex++,setNextQuestion()})}getData();